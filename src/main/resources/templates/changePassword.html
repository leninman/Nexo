<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3" lang="es">

<head>

	
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="">
	<meta name="author" content="">
	<title th:text="#{titulo}"></title>
	
	<link rel="shortcut icon" type="image/x-icon" th:href="@{/img/favicon.ico}"/>
	<link rel="icon" th:href="@{/img/favicon.ico}" type="image/x-icon">

	<!-- Custom fonts for this template-->
	<link href="vendor/fontawesome-free/css/all.min.css" th:href="@{/vendor/fontawesome-free/css/all.min.css}" rel="stylesheet" type="text/css">
	<link href="css/fonts-family-nunito.css" rel="stylesheet">
	
	<!-- Custom styles for this template-->
	<link href="css/sb-admin-2.min.css" th:href="@{/css/sb-admin-2.min.css}" rel="stylesheet">

</head>

<body id="page-top">

	<!-- Page Wrapper -->
	<div id="wrapper">

		<!-- Sidebar -->

		<!-- End of Sidebar -->

		<!-- Content Wrapper -->
		<div id="content-wrapper" class="d-flex flex-column">

			<!-- Main Content -->
			<div id="content">

				<!-- Topbar -->
				<th:block th:replace="fragments/header :: header" />
				<th:block th:replace="fragments/menu :: menuSuperior" />
        		<!-- End of Topbar -->

				<!-- Begin Page Content -->
				<div class="container-fluid">
					<!-- Page Heading -->
					<input type="hidden" name="cambioCH" id="cambioCH" th:value="${session.cambioC}" />
					<div th:if="${param.success}">
     					<div class="alert alert-info" style="text-align: center;">
	     					<i class="fas fa-check"></i>&nbsp;&nbsp;
	     					Operación Realizada Exitosamente
     					</div>
    				</div>
    				<div th:if="${param.error}">
     					<div class="alert alert-danger" style="text-align: center;">
     						<i class="fas fa-times"></i>&nbsp;&nbsp;
     						No se logró realizar la Operación
     					</div>
    				</div>    				
					<div class="row" style="display: inline" align="center">
						<th:block th:replace="usuario/listadoUsuarios :: cambioContrasena" />
					</div>

				</div>
				<!-- /.container-fluid -->

			</div>
			<!-- End of Main Content -->

			<!-- Footer -->
			<th:block th:replace="fragments/footer :: footer" />
			<!-- End of Footer -->

		</div>
		<!-- End of Content Wrapper -->

	</div>
	<!-- End of Page Wrapper -->

	<!-- Scroll to Top Button-->
	<a class="scroll-to-top rounded" href="#page-top"> <i
		class="fas fa-angle-up"></i>
	</a>

   		<!-- Logout Modal-->
		<div class="modal fade" id="logoutModal" tabindex="-1" role="dialog"
			aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered" role="document">
				<div class="modal-content">
				
					<div class="modal-header" style="text-align: right;">
						<h5 class="modal-title" id="exampleModalLabel">¿Está seguro que desea cerrar la sesi&oacute;n?</h5>
						<button class="close" type="button" data-dismiss="modal"
							aria-label="Close">
							<span aria-hidden="true">×</span>
						</button>
					</div>
					<div class="modal-body" ></div>
					<div  style="text-align: center;" >
						<button class="btn btn-secondary" type="button"
							data-dismiss="modal" style="height:40px;width:100px">No</button>
						<button class="btn btn-primary" type="button"
							data-dismiss="modal" onclick="location.href = 'logout';" style="height:40px;width:100px">Si</button>
					</div>
					<br/>
				</div>
			</div>
	    </div>
    
    
    <!-- Cambio Contrasena Modal-->
    <div class="modal fade" id="changePasswordModal" tabindex="-1" role="dialog"
		aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
		
				<div class="modal-header" align="left" Style="text-align:center;">
					<h5 class="modal-title" id="exampleModalLabel">Estimado Cliente</h5>
					<button class="close" type="button" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">×</span>
					</button>
				</div>
				<div th:if="${session.cambioC}" class="modal-body" Style="text-align:center;">     					     						
     				Su contraseña se encuentra vencida,
     				<br/>
     				le informamos que debe actualizarla
    			</div>
				<div th:unless="${session.cambioC}" class="modal-body" Style="text-align:center;">
					Le informamos que debe actualizar su contrase&ntilde;a inicial
				</div>
				
				<div style="text-align: center;">
					<button class="btn btn-primary" type="button"
						data-dismiss="modal" style="height:40px;width:100px">Aceptar</button>
				</div>
				
			</div>
		</div>
    </div>
    
    <!-- Bootstrap core JavaScript-->
	<script src="vendor/jquery/jquery.min.js" th:src="@{/vendor/jquery/jquery.min.js}" ></script>
	<script src="vendor/bootstrap/js/bootstrap.bundle.min.js" th:src="@{/vendor/bootstrap/js/bootstrap.bundle.min.js}"  ></script>

	<!-- Core plugin JavaScript-->
	<script src="vendor/jquery-easing/jquery.easing.min.js" th:src="@{/vendor/jquery-easing/jquery.easing.min.js}"  ></script>

	<!-- Custom scripts for all pages-->
	<script src="js/sb-admin-2.min.js"   th:src="@{/js/sb-admin-2.min.js}" ></script>
	
	<script type="text/javascript">
    $(window).on('load',function(){
        if($('#contrasena1').val()==null || $('#contrasena1').val()=="" || $('#cambioCH').val())
        	$('#changePasswordModal').modal('show');        
    });
</script>
	

</body>

</html>
